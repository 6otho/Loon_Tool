#!name=Spotify歌词翻译
#!desc=通过百度翻译API实现歌词汉化
#!author=6otho[https://github.com/6otho]
#!homepage=https://t.me/PaKo_Ov_Chan
#!icon=https://raw.githubusercontent.com/tugepaopao/Image-Storage/master/cartoon/Cute/spotify.png
#!loon_version=3.3+

[Argument]
appid=input,tag=百度appid,desc=此处填写百度appid
securityKey=input,tag=百度密钥,desc=此处填写百度密钥

[Script]
# 拦截歌词接口，注入本地 spotify.js
http-response ^https:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/ script-path=https://raw.githubusercontent.com/6otho/Loon_tool/refs/heads/main/Js/spotify.js, requires-body=true, binary-body-mode=true, timeout=10, argument=[{appid},{securityKey}]

[Rewrite]
# ------ 以下两行是从“Spotify去广告”插件中拷贝过来的复写规则 -------
^https:\/\/.+\.spotify\.com\/pendragon\ reject-dict
^https:\/\/(.+)\.spotify\.com(:443)?\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/(.*)platform=iphone header https://$1.spotify.com$2/$3/$4platform=ipad

[MITM]
# 对所有 spotify.com 子域名进行 HTTPS 解密，才能让上面 Rewrite 和脚本生效
hostname = spclient.wg.spotify.com, *.spotify.com